# ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥ - ì „ëµ ì„¤ê³„

## ğŸ“‹ ê°œìš”

**ëª©ì :** ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì´ë©”ì¼ ì¸ì¦ì„ í†µí•´ ì•ˆì „í•˜ê²Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¬ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ ì œê³µ  
**ë°©ì‹:** ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ì§ì ‘ ê²€ì¦ + ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (1ë‹¨ê³„ ì²˜ë¦¬)  
**ë³´ì•ˆ:** ì´ë©”ì¼ ì¸ì¦ ê¸°ë°˜, BCrypt ì•”í˜¸í™”, ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê²€ì¦  
**ì¸ì¦:** JWT í† í° (ë§ˆì´í˜ì´ì§€) + ì´ë©”ì¼ 6ìë¦¬ ì¸ì¦ ì½”ë“œ  
**ì„ í–‰ ê¸°ëŠ¥:** SMTP ì´ë©”ì¼ ì¸ì¦ (update/smtp/ì „ëµ_ì„¤ê³„.md)

---

## ğŸ¯ êµ¬í˜„ ë²”ìœ„

### 1. ê¸°ëŠ¥ ì‹œë‚˜ë¦¬ì˜¤

#### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í”Œë¡œìš°
```
1. ì‚¬ìš©ì ë¡œê·¸ì¸ (JWT í† í° ë°œê¸‰)
2. ë§ˆì´í˜ì´ì§€ â†’ "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½" ë²„íŠ¼ í´ë¦­
3. POST /api/auth/email/send-reset-code
   â†’ í˜„ì¬ ë¡œê·¸ì¸í•œ ì´ë©”ì¼ë¡œ 6ìë¦¬ ì½”ë“œ ë°œì†¡
4. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì—ì„œ ë°›ì€ ì½”ë“œ ì…ë ¥
5. ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (í”„ë¡ íŠ¸ì—”ë“œì—ì„œ 2ë²ˆ ì…ë ¥ í›„ ì¼ì¹˜ ê²€ì¦)
6. PUT /api/mypage/password
   Request: {
     "code": "123456",
     "newPassword": "newPassword456@"
   }
   â†’ ì½”ë“œ ê²€ì¦ (EmailVerification ì¡°íšŒ)
   â†’ ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê²€ì¦
   â†’ BCrypt ì•”í˜¸í™” í›„ DB ì—…ë°ì´íŠ¸
   â†’ ì¸ì¦ ë°ì´í„° ì‚­ì œ (1íšŒìš©)
7. ì‘ë‹µ: 200 OK
8. (ì˜µì…˜) ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì™„ë£Œ ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡
```

**âœ¨ í•µì‹¬ í¬ì¸íŠ¸:**
- ì½”ë“œ ê²€ì¦ê³¼ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì„ **í•œ ë²ˆì˜ API í˜¸ì¶œ**ë¡œ ì²˜ë¦¬
- `confirmPassword` ê²€ì¦ì€ **í”„ë¡ íŠ¸ì—”ë“œ**ì—ì„œ ì²˜ë¦¬ (ì¦‰ê°ì ì¸ UX í”¼ë“œë°±)
- ë°±ì—”ë“œëŠ” `code` + `newPassword`ë§Œ ë°›ì•„ì„œ ì²˜ë¦¬

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì„¤ê³„

### 1. ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ í™œìš© ë° ì˜ì¡´ì„±

#### SMTP ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ (ì„ í–‰ í•„ìˆ˜)
- âœ… `EmailVerificationService` - ì¸ì¦ ì½”ë“œ ë°œì†¡
- âœ… `EmailVerification` ì—”í‹°í‹° (type: PASSWORD_RESET, verified: false)
- âœ… `VerificationType.PASSWORD_RESET` Enum
- âœ… `POST /api/auth/email/send-reset-code` - ì½”ë“œ ë°œì†¡ API
- âœ… `EmailVerificationRepository` - ì½”ë“œ ì¡°íšŒ/ê²€ì¦

**âš ï¸ ì¤‘ìš”:** SMTP ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ì´ ë¨¼ì € êµ¬í˜„ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.  
ì°¸ê³ : `update/smtp/ì „ëµ_ì„¤ê³„.md`

#### ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë§ˆì´í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
- âœ… `MyPageController` (`/api/mypage`)
- âœ… `ProfileService` ì¸í„°í˜ì´ìŠ¤
- âœ… `ProfileServiceImpl` (í”„ë¡œí•„ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ)
- âœ… `AccountRepository`
- âœ… `Account` ì—”í‹°í‹° (`password` í•„ë“œ)
- âœ… `PasswordEncoder` (Spring Security - BCrypt)
- âœ… JWT ì¸ì¦ (@AuthenticationPrincipal)

#### ìƒˆë¡œ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸
- ğŸ†• `ResetPasswordRequest` DTO (code + newPassword)
- ğŸ†• `ProfileService.resetPassword()` ë©”ì„œë“œ
- ğŸ†• `MyPageController.resetPassword()` ì—”ë“œí¬ì¸íŠ¸

**âš ï¸ ì£¼ì˜:** ì¤‘ê°„ í† í°(resetToken) ìƒì„±/ê²€ì¦ ë¡œì§ **ë¶ˆí•„ìš”**

---

### 2. ë°ì´í„° ëª¨ë¸

#### Account ì—”í‹°í‹° (ê¸°ì¡´)
```java
@Entity
public class Account extends BaseSoftDeleteSupportEntity {
    
    @Column(nullable = false)
    private String email;
    
    @Column(nullable = false)
    private String password;  // BCrypt ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
    
    // ... ê¸°íƒ€ í•„ë“œ
}
```

**ë³€ê²½ì‚¬í•­ ì—†ìŒ** - ê¸°ì¡´ `password` í•„ë“œë§Œ ì—…ë°ì´íŠ¸

---

#### EmailVerification ì—”í‹°í‹° (SMTP ê¸°ëŠ¥ì—ì„œ ì œê³µ)
```java
@Entity
@Table(name = "email_verification")
public class EmailVerification {
    
    @Column(nullable = false)
    private String email;
    
    @Column(nullable = false, length = 6)
    private String code;  // 6ìë¦¬ ìˆ«ì ì½”ë“œ
    
    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private VerificationType type;  // PASSWORD_RESET
    
    @Column(nullable = false)
    private boolean verified = false;  // ì•„ì§ ì‚¬ìš© ì•ˆ í•¨
    
    @Column(nullable = false)
    private LocalDateTime expiresAt;  // 3ë¶„ í›„
    
    @Column(nullable = false)
    private int attempts = 0;  // ì‹œë„ íšŸìˆ˜ (ìµœëŒ€ 5íšŒ)
}
```

**í™œìš© ë°©ì‹:**
- `type = PASSWORD_RESET`ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì „ìš© ì½”ë“œ ê´€ë¦¬
- ì½”ë“œ ê²€ì¦ ì„±ê³µ ì‹œ `verified = true` ì„¤ì • í›„ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- ì‚¬ìš© í›„ ë ˆì½”ë“œ ì‚­ì œí•˜ì—¬ 1íšŒìš© ë³´ì¥

---

### 3. ë ˆì´ì–´ êµ¬ì¡°

#### íŒ¨í‚¤ì§€ êµ¬ì¡°
```
src/main/java/com/softwarecampus/backend/
â”œâ”€â”€ controller/user/
â”‚   â”œâ”€â”€ EmailVerificationController.java  â† SMTP ê¸°ëŠ¥ (ì´ë¯¸ êµ¬í˜„)
â”‚   â””â”€â”€ MyPageController.java  â† resetPassword() ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
â”œâ”€â”€ service/user/
â”‚   â”œâ”€â”€ email/
â”‚   â”‚   â”œâ”€â”€ EmailVerificationService.java  â† SMTP ê¸°ëŠ¥ (ì´ë¯¸ êµ¬í˜„)
â”‚   â”‚   â””â”€â”€ EmailVerificationServiceImpl.java
â”‚   â””â”€â”€ profile/
â”‚       â”œâ”€â”€ ProfileService.java  â† resetPassword() ë©”ì„œë“œ ì„ ì–¸ ì¶”ê°€
â”‚       â””â”€â”€ ProfileServiceImpl.java  â† ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë¡œì§ êµ¬í˜„
â”œâ”€â”€ dto/user/
â”‚   â””â”€â”€ ResetPasswordRequest.java  (ì‹ ê·œ)
â”œâ”€â”€ repository/user/
â”‚   â”œâ”€â”€ AccountRepository.java  (ê¸°ì¡´)
â”‚   â””â”€â”€ EmailVerificationRepository.java  (SMTP ê¸°ëŠ¥ - ê¸°ì¡´)
â””â”€â”€ domain/user/
    â”œâ”€â”€ Account.java  (ê¸°ì¡´)
    â””â”€â”€ EmailVerification.java  (SMTP ê¸°ëŠ¥ - ê¸°ì¡´)
```

---

## ğŸ“ API ëª…ì„¸

### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ì´ë©”ì¼ ì½”ë“œ ì§ì ‘ ê²€ì¦)

**Endpoint:** `PUT /api/mypage/password`

**ì¸ì¦:** JWT í† í° í•„ìˆ˜ (Authorization: Bearer {token})

**ì„ í–‰ ì¡°ê±´:**
1. `POST /api/auth/email/send-reset-code` í˜¸ì¶œ (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ë°œì†¡)

**Request:**
```json
{
  "code": "123456",
  "newPassword": "newPassword456@"
}
```

**Request í•„ë“œ ì„¤ëª…:**
| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì œì•½ì¡°ê±´ |
|------|------|------|------|----------|
| code | String | âœ… | ì´ë©”ì¼ë¡œ ë°›ì€ 6ìë¦¬ ì¸ì¦ ì½”ë“œ | 6ìë¦¬ ìˆ«ì, 3ë¶„ ìœ íš¨ |
| newPassword | String | âœ… | ìƒˆ ë¹„ë°€ë²ˆí˜¸ | 8~50ì, ëŒ€ì†Œë¬¸ì+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì í¬í•¨ |

**âš ï¸ ì°¸ê³ :**
- `confirmPassword` (ë¹„ë°€ë²ˆí˜¸ í™•ì¸) ê²€ì¦ì€ **í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬**
- ë°±ì—”ë“œëŠ” `code`ì™€ `newPassword`ë§Œ ê²€ì¦

---

**Response (200 OK):**
```json
{
  "message": "ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

**Response (204 No Content):** (ì˜µì…˜ - ì‘ë‹µ ë³¸ë¬¸ ì—†ì´ ì„±ê³µë§Œ í‘œì‹œ)
```
(ì‘ë‹µ ë³¸ë¬¸ ì—†ìŒ)
```

---

**Error Cases:**

**400 Bad Request - Validation ì‹¤íŒ¨**
```json
{
  "type": "https://api.softwarecampus.com/problems/validation-error",
  "title": "Validation Failed",
  "status": 400,
  "detail": "ìš”ì²­ ë³¸ë¬¸ì— ìœ íš¨í•˜ì§€ ì•Šì€ í•„ë“œê°€ ìˆìŠµë‹ˆë‹¤.",
  "instance": "/api/mypage/password",
  "errors": {
    "code": "ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
    "newPassword": "ë¹„ë°€ë²ˆí˜¸ëŠ” 8~50ì, ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤"
  }
}
```

**400 Bad Request - ì¸ì¦ ì½”ë“œ ë¶ˆì¼ì¹˜**
```json
{
  "type": "https://api.softwarecampus.com/problems/invalid-verification-code",
  "title": "Invalid Verification Code",
  "status": 400,
  "detail": "ì¸ì¦ ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
  "instance": "/api/mypage/password"
}
```

**400 Bad Request - ì¸ì¦ ì½”ë“œ ë§Œë£Œ**
```json
{
  "type": "https://api.softwarecampus.com/problems/expired-verification-code",
  "title": "Expired Verification Code",
  "status": 400,
  "detail": "ì¸ì¦ ì½”ë“œê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì´ë©”ì¼ ì¸ì¦ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.",
  "instance": "/api/mypage/password"
}
```

**429 Too Many Requests - ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼**
```json
{
  "type": "https://api.softwarecampus.com/problems/max-attempts-exceeded",
  "title": "Max Attempts Exceeded",
  "status": 429,
  "detail": "ìµœëŒ€ ì‹œë„ íšŸìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. 30ë¶„ í›„ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.",
  "instance": "/api/mypage/password"
}
```

**401 Unauthorized - ì¸ì¦ ì‹¤íŒ¨**
```json
{
  "timestamp": "2025-11-29T12:00:00.000+00:00",
  "status": 401,
  "error": "Unauthorized",
  "message": "Full authentication is required to access this resource",
  "path": "/api/mypage/password"
}
```

**404 Not Found - ê³„ì • ì—†ìŒ**
```json
{
  "type": "https://api.softwarecampus.com/problems/account-not-found",
  "title": "Account Not Found",
  "status": 404,
  "detail": "ê³„ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  "instance": "/api/mypage/password"
}
```

**404 Not Found - ì¸ì¦ ìš”ì²­ ì—†ìŒ**
```json
{
  "type": "https://api.softwarecampus.com/problems/verification-not-found",
  "title": "Verification Not Found",
  "status": 404,
  "detail": "ì¸ì¦ ìš”ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì´ë©”ì¼ ì¸ì¦ ì½”ë“œë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”.",
  "instance": "/api/mypage/password"
}
```

---

## ğŸ” ë³´ì•ˆ ì •ì±…

### 1. ì´ë©”ì¼ ì¸ì¦ ê¸°ë°˜ ë³´ì•ˆ (SMTP ê¸°ëŠ¥ í™œìš©)
- **ì¸ì¦ ì½”ë“œ:** 6ìë¦¬ ìˆ«ì, 3ë¶„ ìœ íš¨
- **ìµœëŒ€ ì‹œë„:** 5íšŒ (ì´ˆê³¼ ì‹œ 30ë¶„ ì°¨ë‹¨)
- **ì¬ì „ì†¡ ì œí•œ:** 60ì´ˆ ì¿¨ë‹¤ìš´
- **1íšŒìš© ë³´ì¥:** ì‚¬ìš© í›„ EmailVerification ë ˆì½”ë“œ ì‚­ì œ

### 2. ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- **ì•Œê³ ë¦¬ì¦˜:** BCrypt (Spring Security ê¸°ë³¸)
- **ê°•ë„:** strength = 10 (2^10 rounds)
- **Salt:** BCrypt ìì²´ ì œê³µ (ìë™ ìƒì„±)

### 3. ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê·œì¹™
- **ìµœì†Œ ê¸¸ì´:** 8ì
- **ìµœëŒ€ ê¸¸ì´:** 50ì
- **í•„ìˆ˜ í¬í•¨:**
  - ëŒ€ë¬¸ì 1ê°œ ì´ìƒ (A-Z)
  - ì†Œë¬¸ì 1ê°œ ì´ìƒ (a-z)
  - ìˆ«ì 1ê°œ ì´ìƒ (0-9)
  - íŠ¹ìˆ˜ë¬¸ì 1ê°œ ì´ìƒ (!@#$%^&*()_+-=[]{}|;:',.<>?/)

**ì •ê·œì‹:**
```regex
^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:',.<>?/]).{8,50}$
```

### 4. ê²€ì¦ ìˆœì„œ
1. **JWT í† í° ê²€ì¦:** ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ (ë§ˆì´í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œ)
2. **ì…ë ¥ ê²€ì¦:** `@Valid` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ DTO í•„ë“œ ê²€ì¦
3. **ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê²€ì¦:**
   - EmailVerification ì¡°íšŒ (email + type + verified=false)
   - ë§Œë£Œ ì‹œê°„ í™•ì¸ (expiresAt)
   - ì‹œë„ íšŸìˆ˜ í™•ì¸ (attempts < 5)
   - ì½”ë“œ ì¼ì¹˜ í™•ì¸
4. **ë³µì¡ë„ ê²€ì¦:** ì •ê·œì‹ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ í™•ì¸
5. **ì•”í˜¸í™” ë° ì €ì¥:** `PasswordEncoder.encode(newPassword)`
6. **ì¸ì¦ ë°ì´í„° ì‚­ì œ:** EmailVerification ë ˆì½”ë“œ ì‚­ì œ (ì¬ì‚¬ìš© ë°©ì§€)

### 5. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- âŒ **ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸ ë¡œê¹… ê¸ˆì§€**
- âŒ **ì¸ì¦ ì½”ë“œ ë¡œê¹… ê¸ˆì§€**
- âœ… **ì´ë©”ì¼ ì¸ì¦ 2ë‹¨ê³„** (ì½”ë“œ ë°œì†¡ â†’ ì½”ë“œ ê²€ì¦ + ë¹„ë°€ë²ˆí˜¸ ë³€ê²½)
- âœ… **ì´ë©”ì¼ ì•Œë¦¼ ê¶Œì¥** (ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ ì‹œ)
- âœ… **Redis ìºì‹œ ë¬´íš¨í™”** (`userDetails:{email}` ìºì‹œ ì‚­ì œ)
- âœ… **íŠ¸ëœì­ì…˜ ì²˜ë¦¬** (`@Transactional` ë³´ì¥)
- âœ… **1íšŒìš© ì½”ë“œ** (ì‚¬ìš© í›„ ì‚­ì œ)

---

## ğŸ› ï¸ êµ¬í˜„ ìƒì„¸

### 1. ResetPasswordRequest DTO

```java
package com.softwarecampus.backend.dto.user;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Pattern;
import jakarta.validation.constraints.Size;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;

/**
 * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ DTO (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)
 */
@Getter
@NoArgsConstructor
@AllArgsConstructor
public class ResetPasswordRequest {
    
    @NotBlank(message = "ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    @Size(min = 6, max = 6, message = "ì¸ì¦ ì½”ë“œëŠ” 6ìë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤")
    @Pattern(regexp = "^[0-9]{6}$", message = "ì¸ì¦ ì½”ë“œëŠ” 6ìë¦¬ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤")
    private String code;
    
    @NotBlank(message = "ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    @Size(min = 8, max = 50, message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 8~50ìì—¬ì•¼ í•©ë‹ˆë‹¤")
    @Pattern(
        regexp = "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[!@#$%^&*()_+\\-=\\[\\]{}|;:',.<>?/]).{8,50}$",
        message = "ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤"
    )
    private String newPassword;
}
```

---

### 2. ProfileService (ì¸í„°í˜ì´ìŠ¤ í™•ì¥)

```java
package com.softwarecampus.backend.service.user.profile;

import com.softwarecampus.backend.dto.user.ResetPasswordRequest;

/**
 * ê³„ì • ì¡°íšŒ ë° í”„ë¡œí•„ ê´€ë¦¬ Service ì¸í„°í˜ì´ìŠ¤
 */
public interface ProfileService {
    
    // ... ê¸°ì¡´ ë©”ì„œë“œë“¤ (getAccountByEmail, updateProfile, deleteAccount)
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)
     * 
     * @param email ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì´ë©”ì¼ (JWTì—ì„œ ì¶”ì¶œ)
     * @param request ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ ì •ë³´ (code + newPassword)
     * @throws com.softwarecampus.backend.exception.user.AccountNotFoundException ê³„ì •ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°
     * @throws com.softwarecampus.backend.exception.user.VerificationNotFoundException ì¸ì¦ ìš”ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
     * @throws com.softwarecampus.backend.exception.user.InvalidVerificationCodeException ì½”ë“œ ë¶ˆì¼ì¹˜
     * @throws com.softwarecampus.backend.exception.user.VerificationCodeExpiredException ì½”ë“œ ë§Œë£Œ
     * @throws com.softwarecampus.backend.exception.user.MaxAttemptsExceededException ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼
     */
    void resetPassword(String email, ResetPasswordRequest request);
}
```

---

### 3. ProfileServiceImpl (êµ¬í˜„)

```java
package com.softwarecampus.backend.service.user.profile;

import com.softwarecampus.backend.domain.user.Account;
import com.softwarecampus.backend.domain.user.EmailVerification;
import com.softwarecampus.backend.domain.common.VerificationType;
import com.softwarecampus.backend.dto.user.ResetPasswordRequest;
import com.softwarecampus.backend.exception.user.*;
import com.softwarecampus.backend.repository.user.AccountRepository;
import com.softwarecampus.backend.repository.user.EmailVerificationRepository;
import com.softwarecampus.backend.util.EmailUtils;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.LocalDateTime;

/**
 * ê³„ì • ì¡°íšŒ ë° í”„ë¡œí•„ ê´€ë¦¬ Service êµ¬í˜„ì²´
 */
@Slf4j
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class ProfileServiceImpl implements ProfileService {
    
    private final AccountRepository accountRepository;
    private final EmailVerificationRepository verificationRepository;
    private final PasswordEncoder passwordEncoder;
    
    @Value("${email.verification.max-attempts:5}")
    private int maxAttempts;
    
    @Value("${email.verification.block-duration-minutes:30}")
    private int blockDurationMinutes;
    
    // ... ê¸°ì¡´ ë©”ì„œë“œë“¤
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)
     */
    @Override
    @Transactional
    public void resetPassword(String email, ResetPasswordRequest request) {
        // 1. ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ì¡°íšŒ (verified=false, type=PASSWORD_RESET)
        log.info("ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì‹œë„: email={}", EmailUtils.maskEmail(email));
        
        EmailVerification verification = verificationRepository
            .findByEmailAndTypeAndVerifiedFalse(email, VerificationType.PASSWORD_RESET)
            .orElseThrow(() -> {
                log.warn("ì¸ì¦ ìš”ì²­ ì—†ìŒ: email={}", EmailUtils.maskEmail(email));
                return new VerificationNotFoundException("ì¸ì¦ ìš”ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì´ë©”ì¼ ì¸ì¦ ì½”ë“œë¥¼ ìš”ì²­í•´ì£¼ì„¸ìš”.");
            });
        
        // 2. ë§Œë£Œ í™•ì¸
        if (verification.isExpired()) {
            log.warn("ì¸ì¦ ì½”ë“œ ë§Œë£Œ: email={}", EmailUtils.maskEmail(email));
            throw new VerificationCodeExpiredException("ì¸ì¦ ì½”ë“œê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì´ë©”ì¼ ì¸ì¦ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.");
        }
        
        // 3. ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸
        if (verification.isBlocked()) {
            long minutesLeft = verification.getRemainingBlockMinutes();
            log.warn("ì¸ì¦ ì°¨ë‹¨ ì¤‘: email={}, ë‚¨ì€ ì‹œê°„={}ë¶„", EmailUtils.maskEmail(email), minutesLeft);
            throw new EmailVerificationBlockedException(
                String.format("ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼ë¡œ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. %dë¶„ í›„ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", minutesLeft)
            );
        }
        
        // 4. ìµœëŒ€ ì‹œë„ íšŸìˆ˜ í™•ì¸
        if (verification.isAttemptsExceeded()) {
            verification.blockForDuration(blockDurationMinutes);
            verificationRepository.save(verification);
            
            log.warn("ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼: email={}, 30ë¶„ ì°¨ë‹¨", EmailUtils.maskEmail(email));
            throw new MaxAttemptsExceededException(
                String.format("ìµœëŒ€ ì‹œë„ íšŸìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. %dë¶„ í›„ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", blockDurationMinutes)
            );
        }
        
        // 5. ì½”ë“œ ê²€ì¦
        if (!verification.getCode().equals(request.getCode())) {
            verification.incrementAttempts();
            verificationRepository.save(verification);
            
            log.warn("ì¸ì¦ ì½”ë“œ ë¶ˆì¼ì¹˜: email={}, ì‹œë„ íšŸìˆ˜={}", 
                EmailUtils.maskEmail(email), verification.getAttempts());
            throw new InvalidVerificationCodeException("ì¸ì¦ ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
        
        // 6. Account ì¡°íšŒ
        Account account = accountRepository.findByEmail(email)
            .orElseThrow(() -> new AccountNotFoundException("ê³„ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
        
        // 7. ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ë° ì €ì¥
        String encodedPassword = passwordEncoder.encode(request.getNewPassword());
        account.setPassword(encodedPassword);
        
        // 8. ì¸ì¦ ë°ì´í„° ì‚­ì œ (1íšŒìš© ë³´ì¥)
        verificationRepository.delete(verification);
        
        log.info("ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì™„ë£Œ: email={}, accountId={}", 
            EmailUtils.maskEmail(email), account.getId());
        
        // 9. (ì˜µì…˜) ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡
        // emailService.sendPasswordChangedNotification(email);
    }
}
```

---

### 4. EmailVerificationRepository (ë©”ì„œë“œ í™•ì¸)

```java
package com.softwarecampus.backend.repository.user;

import com.softwarecampus.backend.domain.user.EmailVerification;
import com.softwarecampus.backend.domain.common.VerificationType;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface EmailVerificationRepository extends JpaRepository<EmailVerification, Long> {
    
    /**
     * ë¯¸ì¸ì¦ ìƒíƒœì˜ ì´ë©”ì¼ ì¸ì¦ ë ˆì½”ë“œ ì¡°íšŒ
     * (SMTP ê¸°ëŠ¥ì—ì„œ ì´ë¯¸ ì œê³µ)
     */
    Optional<EmailVerification> findByEmailAndTypeAndVerifiedFalse(
        String email,
        VerificationType type
    );
    
    // ... ê¸°íƒ€ SMTP ê¸°ëŠ¥ ë©”ì„œë“œë“¤
}
```

---

### 5. MyPageController (ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€)

```java
package com.softwarecampus.backend.controller.user;

import com.softwarecampus.backend.dto.user.AccountResponse;
import com.softwarecampus.backend.dto.user.ResetPasswordRequest;
import com.softwarecampus.backend.dto.user.UpdateProfileRequest;
import com.softwarecampus.backend.service.user.profile.ProfileService;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.ResponseEntity;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.web.bind.annotation.*;

/**
 * ë§ˆì´í˜ì´ì§€ API Controller
 * 
 * ì—”ë“œí¬ì¸íŠ¸:
 * - GET /api/mypage/profile: í”„ë¡œí•„ ì¡°íšŒ
 * - PATCH /api/mypage/profile: í”„ë¡œí•„ ìˆ˜ì •
 * - DELETE /api/mypage/account: ê³„ì • ì‚­ì œ
 * - PUT /api/mypage/password: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)
 * 
 * ì¸ì¦: ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ JWT í† í° í•„ìˆ˜
 */
@Slf4j
@RestController
@RequestMapping("/api/mypage")
@RequiredArgsConstructor
public class MyPageController {

    private final ProfileService profileService;

    // ... ê¸°ì¡´ ì—”ë“œí¬ì¸íŠ¸ë“¤ (getProfile, updateProfile, deleteAccount)
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)
     * 
     * ì„ í–‰ ì¡°ê±´:
     * 1. POST /api/auth/email/send-reset-code (ì¸ì¦ ì½”ë“œ ë°œì†¡)
     * 
     * @param userDetails Spring Security ì¸ì¦ ì •ë³´
     * @param request ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ ì •ë³´ (code + newPassword)
     * @return 204 No Content
     */
    @PutMapping("/password")
    public ResponseEntity<Void> resetPassword(
            @AuthenticationPrincipal UserDetails userDetails,
            @Valid @RequestBody ResetPasswordRequest request) {
        
        String email = userDetails.getUsername();
        log.info("ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ (ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê¸°ë°˜)");
        
        profileService.resetPassword(email, request);
        
        return ResponseEntity.noContent().build();
    }
}
```

---

## âœ… í…ŒìŠ¤íŠ¸ ì „ëµ

### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

#### ProfileServiceImplTest
```java
@Test
void resetPassword_Success() {
    // Given
    String email = "user@example.com";
    String code = "123456";
    ResetPasswordRequest request = new ResetPasswordRequest(code, "newPassword456@");
    
    EmailVerification verification = EmailVerification.builder()
        .email(email)
        .code(code)
        .type(VerificationType.PASSWORD_RESET)
        .expiresAt(LocalDateTime.now().plusMinutes(3))
        .verified(false)
        .attempts(0)
        .build();
    
    Account account = Account.builder()
        .email(email)
        .password(passwordEncoder.encode("oldPassword123!"))
        .build();
    
    when(verificationRepository.findByEmailAndTypeAndVerifiedFalse(email, VerificationType.PASSWORD_RESET))
        .thenReturn(Optional.of(verification));
    when(accountRepository.findByEmail(email)).thenReturn(Optional.of(account));
    
    // When
    profileService.resetPassword(email, request);
    
    // Then
    assertTrue(passwordEncoder.matches("newPassword456@", account.getPassword()));
    verify(verificationRepository).delete(verification);  // 1íšŒìš© ë³´ì¥
}

@Test
void resetPassword_InvalidCode_ThrowsException() {
    // Given
    String email = "user@example.com";
    ResetPasswordRequest request = new ResetPasswordRequest("999999", "newPassword456@");
    
    EmailVerification verification = EmailVerification.builder()
        .email(email)
        .code("123456")
        .type(VerificationType.PASSWORD_RESET)
        .expiresAt(LocalDateTime.now().plusMinutes(3))
        .verified(false)
        .attempts(0)
        .build();
    
    when(verificationRepository.findByEmailAndTypeAndVerifiedFalse(email, VerificationType.PASSWORD_RESET))
        .thenReturn(Optional.of(verification));
    
    // When & Then
    assertThrows(InvalidVerificationCodeException.class, 
        () -> profileService.resetPassword(email, request));
    
    // ì‹œë„ íšŸìˆ˜ ì¦ê°€ í™•ì¸
    assertEquals(1, verification.getAttempts());
    verify(verificationRepository).save(verification);
}

@Test
void resetPassword_ExpiredCode_ThrowsException() {
    // Given
    String email = "user@example.com";
    ResetPasswordRequest request = new ResetPasswordRequest("123456", "newPassword456@");
    
    EmailVerification verification = EmailVerification.builder()
        .email(email)
        .code("123456")
        .type(VerificationType.PASSWORD_RESET)
        .expiresAt(LocalDateTime.now().minusMinutes(1))  // ë§Œë£Œë¨
        .verified(false)
        .attempts(0)
        .build();
    
    when(verificationRepository.findByEmailAndTypeAndVerifiedFalse(email, VerificationType.PASSWORD_RESET))
        .thenReturn(Optional.of(verification));
    
    // When & Then
    assertThrows(VerificationCodeExpiredException.class, 
        () -> profileService.resetPassword(email, request));
}

@Test
void resetPassword_MaxAttemptsExceeded_ThrowsException() {
    // Given
    String email = "user@example.com";
    ResetPasswordRequest request = new ResetPasswordRequest("999999", "newPassword456@");
    
    EmailVerification verification = EmailVerification.builder()
        .email(email)
        .code("123456")
        .type(VerificationType.PASSWORD_RESET)
        .expiresAt(LocalDateTime.now().plusMinutes(3))
        .verified(false)
        .attempts(5)  // ì´ë¯¸ 5íšŒ ì‹œë„
        .build();
    
    when(verificationRepository.findByEmailAndTypeAndVerifiedFalse(email, VerificationType.PASSWORD_RESET))
        .thenReturn(Optional.of(verification));
    
    // When & Then
    assertThrows(MaxAttemptsExceededException.class, 
        () -> profileService.resetPassword(email, request));
    
    // ì°¨ë‹¨ ì„¤ì • í™•ì¸
    assertNotNull(verification.getBlockedUntil());
    verify(verificationRepository).save(verification);
}
```

---

### 2. í†µí•© í…ŒìŠ¤íŠ¸

#### MyPageControllerIntegrationTest
```java
@Test
@WithMockUser(username = "user@example.com")
void resetPassword_Success() throws Exception {
    // Given
    ResetPasswordRequest request = new ResetPasswordRequest("123456", "newPassword456@");
    
    // When & Then
    mockMvc.perform(put("/api/mypage/password")
            .contentType(MediaType.APPLICATION_JSON)
            .content(objectMapper.writeValueAsString(request)))
        .andExpect(status().isNoContent());
}

@Test
void resetPassword_NoAuth_Returns401() throws Exception {
    // Given
    ResetPasswordRequest request = new ResetPasswordRequest("123456", "newPassword456@");
    
    // When & Then
    mockMvc.perform(put("/api/mypage/password")
            .contentType(MediaType.APPLICATION_JSON)
            .content(objectMapper.writeValueAsString(request)))
        .andExpect(status().isUnauthorized());
}

@Test
@WithMockUser(username = "user@example.com")
void resetPassword_InvalidCode_Returns400() throws Exception {
    // Given
    ResetPasswordRequest request = new ResetPasswordRequest("999999", "newPassword456@");
    
    // When & Then
    mockMvc.perform(put("/api/mypage/password")
            .contentType(MediaType.APPLICATION_JSON)
            .content(objectMapper.writeValueAsString(request)))
        .andExpect(status().isBadRequest())
        .andExpect(jsonPath("$.detail").value("ì¸ì¦ ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."));
}
```

---

## ğŸš€ ë°°í¬ ê³ ë ¤ì‚¬í•­

### 1. ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸ ë¡œê¹… ê¸ˆì§€
- [x] BCrypt ì•”í˜¸í™” ì ìš©
- [x] ë³µì¡ë„ ê²€ì¦ (ì •ê·œì‹)
- [x] ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ê²€ì¦
- [x] JWT ì¸ì¦ í•„ìˆ˜
- [x] 1íšŒìš© ì½”ë“œ (ì‚¬ìš© í›„ ì‚­ì œ)
- [ ] (ì˜µì…˜) ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼ ì´ë©”ì¼

### 2. ë°ì´í„°ë² ì´ìŠ¤
- **ë³€ê²½ì‚¬í•­ ì—†ìŒ** - ê¸°ì¡´ `account.password` ì»¬ëŸ¼ í™œìš©
- **ë§ˆì´ê·¸ë ˆì´ì…˜ ë¶ˆí•„ìš”**
- EmailVerification í…Œì´ë¸”ì€ SMTP ê¸°ëŠ¥ì—ì„œ ì´ë¯¸ ìƒì„±ë¨

### 3. Redis ìºì‹œ ë¬´íš¨í™” (ê¶Œì¥)
í”„ë¡œí•„ ìˆ˜ì •ê³¼ ìœ ì‚¬í•˜ê²Œ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œ ì‚¬ìš©ì ìºì‹œë¥¼ ì‚­ì œí•˜ì—¬ ìµœì‹  ì •ë³´ ë°˜ì˜:

```java
// ProfileServiceImpl.java (ì˜µì…˜)
@Override
@Transactional
public void resetPassword(String email, ResetPasswordRequest request) {
    // ... ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë¡œì§
    
    // Redis ìºì‹œ ë¬´íš¨í™”
    String cacheKey = "userDetails:" + email;
    redisTemplate.delete(cacheKey);
    
    log.info("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì™„ë£Œ ë° ìºì‹œ ë¬´íš¨í™”: email={}", EmailUtils.maskEmail(email));
}
```

### 4. ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡ (ê¶Œì¥)
ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ ì‹œ ë³´ì•ˆì„ ìœ„í•´ ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡:

```java
// ProfileServiceImpl.java (ì˜µì…˜)
@Override
@Transactional
public void resetPassword(String email, ResetPasswordRequest request) {
    // ... ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë¡œì§
    
    // ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡
    emailService.sendPasswordChangedNotification(email);
    
    log.info("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡: email={}", EmailUtils.maskEmail(email));
}
```

---

## ğŸ“Œ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ê°€ì´ë“œ

### 1. API í˜¸ì¶œ ì˜ˆì‹œ (Axios)

```typescript
// src/services/mypage.ts
import axios from 'axios';

export interface ResetPasswordRequest {
  code: string;
  newPassword: string;
}

export const resetPassword = async (data: ResetPasswordRequest): Promise<void> => {
  const response = await axios.put('/api/mypage/password', data, {
    headers: {
      Authorization: `Bearer ${localStorage.getItem('accessToken')}`
    }
  });
  return response.data;
};
```

### 2. React Hook ì‚¬ìš© ì˜ˆì‹œ

```typescript
// src/pages/MyPage/useMyPage.ts
import { useMutation } from '@tanstack/react-query';
import { resetPassword, ResetPasswordRequest } from '@/services/mypage';

export const useResetPassword = () => {
  return useMutation({
    mutationFn: (data: ResetPasswordRequest) => resetPassword(data),
    onSuccess: () => {
      alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
    },
    onError: (error: any) => {
      if (error.response?.status === 400) {
        alert(error.response.data.detail || 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      } else if (error.response?.status === 429) {
        alert('ìµœëŒ€ ì‹œë„ íšŸìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. 30ë¶„ í›„ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.');
      }
    }
  });
};
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ ê²€ì¦ ì˜ˆì‹œ

```typescript
// src/pages/MyPage/components/PasswordChangeModal.tsx
const [newPassword, setNewPassword] = useState('');
const [confirmPassword, setConfirmPassword] = useState('');
const [passwordError, setPasswordError] = useState('');

const handlePasswordChange = () => {
  // í”„ë¡ íŠ¸ì—”ë“œì—ì„œ confirmPassword ê²€ì¦
  if (newPassword !== confirmPassword) {
    setPasswordError('ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    return;
  }
  
  // ë³µì¡ë„ ê²€ì¦ (ì˜µì…˜ - ë°±ì—”ë“œì—ì„œë„ ê²€ì¦í•¨)
  const passwordRegex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:',.<>?/]).{8,50}$/;
  if (!passwordRegex.test(newPassword)) {
    setPasswordError('ë¹„ë°€ë²ˆí˜¸ëŠ” 8~50ì, ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.');
    return;
  }
  
  // ë°±ì—”ë“œ API í˜¸ì¶œ (code + newPasswordë§Œ ì „ì†¡)
  resetPasswordMutation.mutate({
    code,
    newPassword
  });
};
```

---

## ğŸ“… êµ¬í˜„ ì¼ì • (ì˜ˆìƒ)

### Phase 1: DTO ìƒì„± (0.5ì¼)
- ResetPasswordRequest DTO ì‘ì„±
- Validation ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€

### Phase 2: Service ë¡œì§ êµ¬í˜„ (1ì¼)
- ProfileService.resetPassword() ë©”ì„œë“œ ì„ ì–¸
- ProfileServiceImpl.resetPassword() êµ¬í˜„
- ì½”ë“œ ê²€ì¦ â†’ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ â†’ ì¸ì¦ ë°ì´í„° ì‚­ì œ ë¡œì§

### Phase 3: Controller ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (0.5ì¼)
- MyPageController.resetPassword() ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬

### Phase 4: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (1ì¼)
- ProfileServiceImplTest (ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
- ì½”ë“œ ë¶ˆì¼ì¹˜, ë§Œë£Œ, ìµœëŒ€ ì‹œë„ ì´ˆê³¼ í…ŒìŠ¤íŠ¸

### Phase 5: í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± (1ì¼)
- MyPageControllerIntegrationTest
- ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ (ì´ë©”ì¼ ì¸ì¦ â†’ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •)

### Phase 6: í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ (0.5ì¼)
- ì´ë©”ì¼ ì¸ì¦ UI â†’ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • UI ì—°ë™
- ì—ëŸ¬ í•¸ë“¤ë§ í™•ì¸

**ì´ ì˜ˆìƒ ê¸°ê°„:** 4-5ì¼

**âš ï¸ ì„ í–‰ ì¡°ê±´:** SMTP ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥ì´ ë¨¼ì € êµ¬í˜„ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.  
ì°¸ê³ : `update/smtp/ì „ëµ_ì„¤ê³„.md`

---

## âœ¨ ì¶”ê°€ ê°œì„  ì‚¬í•­ (í–¥í›„)

1. **ì´ë©”ì¼ ì•Œë¦¼ ìë™í™”:** ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ ì‹œ ìë™ ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡
2. **ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì´ë ¥ ì €ì¥:** ê°ì‚¬ ì¶”ì ì„ ìœ„í•´ ë³€ê²½ ì‹œê° ê¸°ë¡
3. **ë¹„ë°€ë²ˆí˜¸ ì¬ì‚¬ìš© ì œí•œ í™•ëŒ€:** ìµœê·¼ 5ê°œ ë¹„ë°€ë²ˆí˜¸ ì¬ì‚¬ìš© ë°©ì§€
4. **2ë‹¨ê³„ ì¸ì¦ (2FA) ê°•í™”:** SMS ì¸ì¦ ì¶”ê°€ ì˜µì…˜
5. **ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ì •ì±…:** 90ì¼ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¶Œì¥
6. **ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë¡œê·¸ì•„ì›ƒ:** ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œ ë‹¤ë¥¸ ê¸°ê¸° ì„¸ì…˜ ë¬´íš¨í™”

---

**ì‘ì„±ì¼:** 2025ë…„ 11ì›” 29ì¼  
**ì‘ì„±ì:** GitHub Copilot  
**ë¬¸ì„œ ë²„ì „:** 3.0 (ë‹¨ìˆœí™” ë²„ì „ - ì½”ë“œ ì§ì ‘ ê²€ì¦ ë°©ì‹)  
**ì°¸ê³  ë¬¸ì„œ:** 
- SMTP ì „ëµ ì„¤ê³„ (update/smtp/ì „ëµ_ì„¤ê³„.md)
- ë§ˆì´í˜ì´ì§€ API ëª…ì„¸ (docs/api/03_mypage.md)
