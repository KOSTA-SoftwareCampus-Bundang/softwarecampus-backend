# 커뮤니티 기능 - 프론트엔드 연동 요청사항

> **📅 작성일:** 2024-12-01
> **🎯 목적:** 프론트엔드-백엔드 API 연동을 위한 수정/확인 요청

---

## 1. 확인 완료 사항 ✅

다음 API들은 프론트엔드 연동 준비가 완료되었습니다:

| API | 메서드 | 상태 |
|-----|--------|------|
| 게시글 목록 조회 | `GET /api/boards` | ✅ |
| 게시글 상세 조회 | `GET /api/boards/{id}` | ✅ |
| 게시글 작성 | `POST /api/boards` | ✅ |
| 게시글 수정 | `PATCH /api/boards/{id}` | ✅ |
| 게시글 삭제 | `DELETE /api/boards/{id}` | ✅ |
| 게시글 추천/취소 | `POST/DELETE /api/boards/{id}/recommends` | ✅ |
| 댓글 CRUD | `/api/boards/{id}/comments/**` | ✅ |
| 첨부파일 다운로드 | `GET /api/boards/{id}/boardAttachs/{attachId}/download` | ✅ |

---

## 2. 요청 사항 🔴

### 2.1 정렬 파라미터 추가 (선택)

**현재:** 목록 조회 시 정렬 옵션 없음

**요청:** `GET /api/boards`에 `sortType` 파라미터 추가

```java
// BoardController.java - getBoards 메서드에 파라미터 추가
@GetMapping
public ResponseEntity<?> getBoards(
    @RequestParam(defaultValue = "1") int pageNo, 
    BoardCategory category, 
    @RequestParam(required = false) String searchType, 
    @RequestParam(required = false) String searchText,
    @RequestParam(defaultValue = "latest") String sortType  // 추가 요청
)
```

**정렬 옵션:**
| sortType | 설명 | 정렬 기준 |
|----------|------|----------|
| `latest` | 최신순 (기본값) | `createdAt DESC` |
| `popular` | 추천순 | `likeCount DESC` |
| `views` | 조회순 | `hits DESC` |
| `comments` | 댓글순 | `commentsCount DESC` |

> ⚠️ **선택사항:** 프론트엔드 UI에 정렬 기능이 있으나, 없어도 기본 동작에는 문제 없습니다.

---

### 2.2 목록 응답에 필드 추가 (선택)

**현재 `BoardListResponseDTO`:**
```java
private Long id;
private BoardCategory category;
private String title;
private Boolean secret;
private String userNickName;
private Long accountId;
private Long commentsCount;
private LocalDateTime createdAt;
```

**추가 요청 (UI 표시용):**
```java
private Long hits;       // 조회수
private Long likeCount;  // 추천수
```

> ⚠️ **선택사항:** 현재 상세 조회에서만 제공됩니다. 목록에서도 표시하려면 추가 필요.

---

## 3. 프론트엔드 파라미터 매핑 안내

프론트엔드가 다음과 같이 호출합니다 (수정 예정):

| 용도 | 프론트 파라미터 | 백엔드 파라미터 |
|------|----------------|----------------|
| 페이지 번호 | `pageNo` | `pageNo` ✅ |
| 카테고리 | `category` | `category` ✅ |
| 검색 유형 | `searchType` | `searchType` ✅ |
| 검색어 | `searchText` | `searchText` ✅ |

---

## 4. 응답 구조 확인

### 4.1 목록 조회 응답 (Spring Page)

프론트엔드는 다음 필드를 사용합니다:

```json
{
  "content": [...],
  "totalElements": 150,
  "totalPages": 8,
  "number": 0,
  "size": 20
}
```

### 4.2 에러 응답 (ProblemDetail)

현재 구현된 RFC 7807 형식 그대로 사용:

```json
{
  "type": "about:blank",
  "title": "BOARD_NOT_FOUND",
  "status": 404,
  "detail": "게시글을 찾을 수 없습니다",
  "instance": "/api/boards/999",
  "timestamp": "2024-12-01 10:00:00"
}
```

---

## 5. 우선순위

| 순위 | 항목 | 필수 여부 |
|------|------|----------|
| 1 | 현재 API 그대로 유지 | ✅ 필수 |
| 2 | sortType 파라미터 추가 | 🟡 선택 |
| 3 | 목록에 hits/likeCount 추가 | 🟡 선택 |

---

## 6. 질문/협의 필요 사항

1. **페이지 크기 고정 vs 가변**
   - 현재: 백엔드에서 고정 (20개?)
   - 프론트: `limit` 파라미터 제거 예정

2. **비밀글 목록 노출**
   - 현재: 목록에 `secret: true`로 표시
   - 비밀글 내용은 상세 조회 시 권한 체크?

---

**문의:** 프론트엔드 팀
