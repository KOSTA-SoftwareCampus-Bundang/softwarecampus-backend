# ==============================================================================
# 환경 설정 예시 파일
# ==============================================================================
# 이 파일을 복사하여 .env 파일을 생성하고 실제 값으로 변경하세요.
# .env 파일은 Git에 포함되지 않으므로 보안 정보를 안전하게 관리할 수 있습니다.
#
# 사용법:
# 1. 이 파일을 .env로 복사: cp .env.example .env
# 2. .env 파일의 값을 실제 환경에 맞게 수정
# 3. Git에 .env 파일이 추가되지 않도록 .gitignore 확인
# ==============================================================================

# ------------------------------------------------------------------------------
# 서버 설정
# ------------------------------------------------------------------------------
PORT_NO=8080

# ------------------------------------------------------------------------------
# 데이터베이스 설정
# ------------------------------------------------------------------------------
DATABASE_TYPE=mysql
DB_DRIVER=com.mysql.cj.jdbc.Driver
DB_URL=localhost:3306
DB_NAME=softcampus
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_CHARACTER_ENCODING=UTF-8
DB_MYSQL_COLLATION_SERVER=utf8mb4_unicode_ci
DB_MYSQL_INIT_CONNECT=SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci
TZ=Asia/Seoul

# SSL/TLS 설정 (2025-12-01 추가)
# 로컬 개발: useSSL=false (자체 서명 인증서 문제 회피)
# 운영 환경: useSSL=true (기본값, TLS 암호화 필수)
DB_USE_SSL=false

# JPA 설정
JPA_DDL_AUTO=none
JPA_SHOW_SQL=false
JPA_OPEN_IN_VIEW=false

# ------------------------------------------------------------------------------
# AWS S3 설정
# ------------------------------------------------------------------------------
# DefaultCredentialsProvider 사용:
# - 로컬: 환경변수 또는 ~/.aws/credentials
# - AWS 배포: IAM Role 사용 (환경변수 불필요)
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET_NAME=your-bucket-name
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key

# ------------------------------------------------------------------------------
# 파일 업로드 설정
# ------------------------------------------------------------------------------
# 프로필 이미지
FILE_UPLOAD_PROFILE_EXTENSIONS=jpg,jpeg,png,gif,webp
FILE_UPLOAD_PROFILE_CONTENT_TYPES=image/jpeg,image/png,image/gif,image/webp
FILE_UPLOAD_PROFILE_MAX_SIZE=5242880

# 게시판 첨부파일
FILE_UPLOAD_BOARD_ATTACH_EXTENSIONS=jpg,jpeg,png,gif,webp,pdf,doc,docx,xls,xlsx,ppt,pptx,txt,md,csv,zip,rar
FILE_UPLOAD_BOARD_ATTACH_CONTENT_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain,text/markdown,text/csv,application/zip,application/x-rar-compressed,application/x-zip-compressed
FILE_UPLOAD_BOARD_ATTACH_MAX_SIZE=52428800

# 과정 이미지
FILE_UPLOAD_COURSE_IMAGE_EXTENSIONS=jpg,jpeg,png,gif,webp
FILE_UPLOAD_COURSE_IMAGE_CONTENT_TYPES=image/jpeg,image/png,image/gif,image/webp
FILE_UPLOAD_COURSE_IMAGE_MAX_SIZE=10485760

# 기관 등록 첨부파일
FILE_UPLOAD_ACADEMY_FILE_EXTENSIONS=pdf,jpg,jpeg,png,doc,docx
FILE_UPLOAD_ACADEMY_FILE_CONTENT_TYPES=application/pdf,image/jpeg,image/png,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
FILE_UPLOAD_ACADEMY_FILE_MAX_SIZE=10485760

# ------------------------------------------------------------------------------
# ProblemDetail API 설정
# ------------------------------------------------------------------------------
PROBLEM_BASE_URI=https://api.example.com/problems

# ------------------------------------------------------------------------------
# Redis 설정
# ------------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# JWT 설정
# ------------------------------------------------------------------------------
JWT_SECRET=your-very-long-and-secure-secret-key-at-least-256-bits
JWT_EXPIRATION=1800000

# ------------------------------------------------------------------------------
# CORS 설정
# ------------------------------------------------------------------------------
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ------------------------------------------------------------------------------
# SMTP Email 설정
# ------------------------------------------------------------------------------
MAIL_USERNAME=your-email@gmail.com
MAIL_APP_PASSWORD=your-gmail-app-password

# ------------------------------------------------------------------------------
# ADMIN 계정 설정
# ------------------------------------------------------------------------------
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=your-secure-admin-password
ADMIN_NAME=시스템 관리자
ADMIN_PHONE=010-0000-0000

# ------------------------------------------------------------------------------
# Rate Limiting 설정
# ------------------------------------------------------------------------------
# 전역 요청 제한 (IP당 분당 요청 수)
RATE_LIMIT_GLOBAL=100

# 로그인 요청 제한 (IP당 분당 요청 수)
RATE_LIMIT_LOGIN=5

# 비밀번호 검증 요청 제한 (IP당 분당 요청 수)
RATE_LIMIT_PASSWORD_VERIFICATION=10

# Rate Limiting 활성화 여부
RATE_LIMIT_ENABLED=true

# ------------------------------------------------------------------------------
# Rate Limiting 보안 설정 (IP 스푸핑 방지)
# ------------------------------------------------------------------------------
# 프록시 헤더 신뢰 여부
# - false (기본값, 권장): RemoteAddr만 사용, X-Forwarded-For 무시
#   → 로컬 개발, 테스트, 프록시 없는 환경에 적합
# - true: 신뢰할 수 있는 프록시 검증 후 X-Forwarded-For 사용
#   → 운영 환경 (Nginx, AWS ALB 등 프록시 뒤) 에 적합
RATE_LIMIT_TRUST_FORWARDED_HEADERS=false

# 신뢰할 수 있는 프록시 IP 목록 (쉼표로 구분)
# 
# 로컬/개발 환경:
# RATE_LIMIT_TRUSTED_PROXIES=
#
# 운영 환경 (Nginx 프록시):
# RATE_LIMIT_TRUSTED_PROXIES=10.0.1.100
#
# 운영 환경 (AWS ALB + Nginx):
# RATE_LIMIT_TRUSTED_PROXIES=10.0.1.0/24,10.0.2.100
#
# 주의: trust-forwarded-headers=true 인 경우 반드시 설정 필요
RATE_LIMIT_TRUSTED_PROXIES=
