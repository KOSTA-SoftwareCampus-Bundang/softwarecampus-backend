# --------------------------------------------------------------------
## 기본 정책
# 최종수정일 : 2025-10-20
# --------------------------------------------------------------------
# 고정에 가까운 일부 세팅을 제외하고 대부분의 값은 환경변수를 통해 세팅 (.env)
# 토큰 등 민감 정보는 무조건 .env 파일을 통해 환경변수로 세팅할 것
# application.properties 파일은 기본적으로 고정, .env파일의 세팅을 주입
# env 파일은 외부 주입하는 방식, 개발 환경에서는 수동으로 갱신 (CI/CD 단계에서 주입되어 빌드)
# 주석은 무조건 작성 후 개행. 코드 뒤에 붙이는 방식으로 작성하면 에러가 발생한다.
# ---------------------------------------------------------------------


# env 파일 사용 및 경로 설정
# Spring Boot ConfigData 로더는 확장자에 따라 로더를 결정합니다.
# .env 확장자는 기본 미지원이므로 .env.properties도 함께 탐색합니다.
spring.config.import=optional:file:./.env[.properties]


# 포트번호 설정
server.port=${PORT_NO:8080}

# ----------------------------------------------------------------------
## DB 연결 설정
# 최종수정일 :2025-10-20
# ----------------------------------------------------------------------

#spring.jpa.database Deprecated 됨 -> Spring에서 자동 감지한다.
#spring.jpa.database=${DATABASE_TYPE}
spring.datasource.driver-class-name=${DB_DRIVER}
spring.datasource.url=jdbc:mysql://${DB_URL}/${DB_NAME}?serverTimezone=${TZ}&useSSL=false&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=${DB_CHARACTER_ENCODING}&connectionCollation=${DB_MYSQL_COLLATION_SERVER}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# JPA 설정
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO}
spring.jpa.show-sql=${JPA_SHOW_SQL}
spring.jpa.open-in-view=${JPA_OPEN_IN_VIEW}
spring.datasource.hikari.connectionInitSql=${DB_MYSQL_INIT_CONNECT}

# dialect 명시하는 부분 Deprecated됨 -> Spring에서 자동 감지한다.
# Warn 뜨는 거 귀찮아서 일부러 주석처리한 것. 두 설정 모두 마찬가지임. hibernate쪽 옵션이 좀 더 현대적인 스펙임
#spring.jpa.properties.hibernate.dialect=${JPA_DIALECT}
#spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

#유니코드는 항시 사용하므로 true 고정
spring.jpa.properties.hibernate.connection.useUnicode=true

# ----------------------------------------------------------------------
## 로그 관련 설정
# 최종수정일 :2025-10-20
# ----------------------------------------------------------------------
#log
#logging.level.root=${LOG_LEVEL_ROOT}
#logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL}
#logging.level.org.springframework.orm.jpa.JpaTransactionManager=${LOG_LEVEL_TX}
#logging.level.org.springframework.transaction.interceptor.TransactionInterceptor=${LOG_LEVEL_INTERCEPTOR}
